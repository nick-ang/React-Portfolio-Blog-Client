{"ast":null,"code":"import _defineProperty from\"/Users/liuai/code/React-Portfolio-Blog-Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/liuai/code/React-Portfolio-Blog-Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/liuai/code/React-Portfolio-Blog-Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/liuai/code/React-Portfolio-Blog-Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/liuai/code/React-Portfolio-Blog-Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/liuai/code/React-Portfolio-Blog-Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/liuai/code/React-Portfolio-Blog-Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/liuai/code/React-Portfolio-Blog-Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/liuai/code/React-Portfolio-Blog-Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{Link,withRouter}from\"react-router-dom\";import{Alert,Button,Container,Form,FormGroup,Input,Label}from\"reactstrap\";import{Editor}from\"@tinymce/tinymce-react\";import\"draft-js/dist/Draft.css\";import Footer from\"./Footer\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ArticleEdit=/*#__PURE__*/function(_Component){_inherits(ArticleEdit,_Component);var _super=_createSuper(ArticleEdit);function ArticleEdit(props){var _this;_classCallCheck(this,ArticleEdit);_this=_super.call(this,props);_this.emptyItem={title:\"\",content:\"\"};_this.state={item:_this.emptyItem,errorMessage:null,isCreate:false};_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));return _this;}_createClass(ArticleEdit,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,article;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:this.state.isCreate=this.props.match.params.id===\"new\";// are we editing or creating?\nif(this.state.isCreate){_context.next=9;break;}_context.next=4;return this.props.api.getById(this.props.match.params.id);case 4:response=_context.sent;_context.next=7;return response.json();case 7:article=_context.sent;this.setState({item:article});case 9:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"handleChange\",value:function handleChange(content,event){var value=content;var item=_objectSpread({},this.state.item);var name=event.targetElm.name;item[name]=value;this.setState({item:item});}},{key:\"handleSubmit\",value:function(){var _handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event){var _this$state,item,isCreate,result;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:event.preventDefault();_this$state=this.state,item=_this$state.item,isCreate=_this$state.isCreate;if(!isCreate){_context2.next=8;break;}_context2.next=5;return this.props.api.create(item);case 5:_context2.t0=_context2.sent;_context2.next=11;break;case 8:_context2.next=10;return this.props.api.update(item);case 10:_context2.t0=_context2.sent;case 11:result=_context2.t0;if(!result.ok){this.setState({errorMessage:\"Failed to \".concat(isCreate?\"create\":\"update\",\" record: \").concat(result.status,\" \").concat(result.statusText)});}else{this.setState({errorMessage:null});this.props.history.push(\"/articles\");}case 13:case\"end\":return _context2.stop();}}},_callee2,this);}));function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}return handleSubmit;}()},{key:\"render\",value:function render(){var _jsx2;var _this$state2=this.state,item=_this$state2.item,errorMessage=_this$state2.errorMessage;var title=/*#__PURE__*/_jsx(\"h2\",{children:this.props.match.params.id===\"new\"?\"Add Article\":\"Edit Article\"});var submit=/*#__PURE__*/_jsx(\"h2\",{children:this.props.match.params.id===\"new\"?\"submit\":\"hidden\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"lg:mt-20 \",children:[this.props.navbar,/*#__PURE__*/_jsxs(Container,{style:{textAlign:\"left\"},children:[title,/*#__PURE__*/_jsx(\"br\",{}),errorMessage?/*#__PURE__*/_jsx(Alert,{color:\"warning\",children:errorMessage}):null,/*#__PURE__*/_jsxs(Form,{onSubmit:this.handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"\",children:[/*#__PURE__*/_jsxs(FormGroup,{className:\"title col-md-20 mb-3\",children:[/*#__PURE__*/_jsx(Label,{for:\"title\",children:\"Title\"}),/*#__PURE__*/_jsx(Input,{type:\"hidden\",name:\"title\",id:\"title\",value:item.title||\"\",onChange:this.handleChange,autoComplete:\"title\",readonly:true}),/*#__PURE__*/_jsx(Editor,(_jsx2={apiKey:\"emehi8uy1oa5o8lchnrih1issh91tfh2wn2l3iul0tjhr1eo\",value:this.state.content,textareaName:\"title\"},_defineProperty(_jsx2,\"value\",item.title||\"\"),_defineProperty(_jsx2,\"init\",{height:175,menubar:true}),_defineProperty(_jsx2,\"onEditorChange\",this.handleChange),_jsx2))]}),/*#__PURE__*/_jsxs(FormGroup,{className:\"col-md-30 mb-3\",children:[/*#__PURE__*/_jsx(Label,{for:\"content\",children:\"Content\"}),/*#__PURE__*/_jsx(Input,{name:\"content\",id:\"content\",value:item.content||\"\",onChange:this.handleChange,autoComplete:\"phone\",readonly:true,type:\"hidden\"}),/*#__PURE__*/_jsx(Editor,{id:\"content\",value:item.content||\"\",textareaName:\"content\",init:{height:2000,menubar:true},onEditorChange:this.handleChange})]})]}),/*#__PURE__*/_jsx(\"div\",{className:submit.props.children,children:/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Button,{color:\"primary\",type:\"submit\",children:\"Save\"}),/*#__PURE__*/_jsx(Button,{color:\"secondary\",tag:Link,to:\"/articles\",children:\"Cancel\"})]})})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"p\",{className:\"text-center\",children:\"Sorry you dont have edit permissions!\"})]}),/*#__PURE__*/_jsx(Footer,{})]});}}]);return ArticleEdit;}(Component);export default withRouter(ArticleEdit);","map":{"version":3,"sources":["/Users/liuai/code/React-Portfolio-Blog-Client/src/ArticleEdit.js"],"names":["React","Component","Link","withRouter","Alert","Button","Container","Form","FormGroup","Input","Label","Editor","Footer","ArticleEdit","props","emptyItem","title","content","state","item","errorMessage","isCreate","handleChange","bind","handleSubmit","match","params","id","api","getById","response","json","article","setState","event","value","name","targetElm","preventDefault","create","update","result","ok","status","statusText","history","push","submit","navbar","textAlign","height","menubar","children"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport {\n  Alert,\n  Button,\n  Container,\n  Form,\n  FormGroup,\n  Input,\n  Label,\n} from \"reactstrap\";\nimport { Editor } from \"@tinymce/tinymce-react\";\nimport \"draft-js/dist/Draft.css\";\nimport Footer from \"./Footer\";\n\nclass ArticleEdit extends Component {\n  emptyItem = {\n    title: \"\",\n    content: \"\",\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      item: this.emptyItem,\n      errorMessage: null,\n      isCreate: false,\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  async componentDidMount() {\n    this.state.isCreate = this.props.match.params.id === \"new\"; // are we editing or creating?\n    if (!this.state.isCreate) {\n      const response = await this.props.api.getById(this.props.match.params.id);\n      const article = await response.json();\n      this.setState({ item: article });\n    }\n  }\n\n  handleChange(content, event) {\n    const value = content;\n    let item = { ...this.state.item };\n    const name = event.targetElm.name;\n    item[name] = value;\n    this.setState({ item });\n  }\n\n  async handleSubmit(event) {\n    event.preventDefault();\n    const { item, isCreate } = this.state;\n\n    let result = isCreate\n      ? await this.props.api.create(item)\n      : await this.props.api.update(item);\n\n    if (!result.ok) {\n      this.setState({\n        errorMessage: `Failed to ${isCreate ? \"create\" : \"update\"} record: ${\n          result.status\n        } ${result.statusText}`,\n      });\n    } else {\n      this.setState({ errorMessage: null });\n      this.props.history.push(\"/articles\");\n    }\n  }\n\n  render() {\n    const { item, errorMessage } = this.state;\n    const title = (\n      <h2>\n        {this.props.match.params.id === \"new\" ? \"Add Article\" : \"Edit Article\"}\n      </h2>\n    );\n    const submit = (\n      <h2>{this.props.match.params.id === \"new\" ? \"submit\" : \"hidden\"}</h2>\n    );\n\n    return (\n      <div className=\"lg:mt-20 \">\n        {this.props.navbar}\n        <Container style={{ textAlign: \"left\" }}>\n          {title}\n          <br />\n          {errorMessage ? <Alert color=\"warning\">{errorMessage}</Alert> : null}\n          <Form onSubmit={this.handleSubmit}>\n            <div className=\"\">\n              <FormGroup className=\"title col-md-20 mb-3\">\n                <Label for=\"title\">Title</Label>\n                <Input\n                  type=\"hidden\"\n                  name=\"title\"\n                  id=\"title\"\n                  value={item.title || \"\"}\n                  onChange={this.handleChange}\n                  autoComplete=\"title\"\n                  readonly\n                />\n                <Editor\n                  apiKey=\"emehi8uy1oa5o8lchnrih1issh91tfh2wn2l3iul0tjhr1eo\"\n                  value={this.state.content}\n                  textareaName=\"title\"\n                  value={item.title || \"\"}\n                  init={{\n                    height: 175,\n                    menubar: true,\n                  }}\n                  onEditorChange={this.handleChange}\n                />\n              </FormGroup>\n              <FormGroup className=\"col-md-30 mb-3\">\n                <Label for=\"content\">Content</Label>\n                <Input\n                  name=\"content\"\n                  id=\"content\"\n                  value={item.content || \"\"}\n                  onChange={this.handleChange}\n                  autoComplete=\"phone\"\n                  readonly\n                  type=\"hidden\"\n                />\n                <Editor\n                  id=\"content\"\n                  value={item.content || \"\"}\n                  textareaName=\"content\"\n                  init={{\n                    height: 2000,\n                    menubar: true,\n                  }}\n                  onEditorChange={this.handleChange}\n                />\n              </FormGroup>\n            </div>\n            <div className={submit.props.children}>\n              <FormGroup>\n                <Button color=\"primary\" type=\"submit\">\n                  Save\n                </Button>\n                <Button color=\"secondary\" tag={Link} to=\"/articles\">\n                  Cancel\n                </Button>\n              </FormGroup>\n            </div>\n          </Form>\n          <br />\n          <p className=\"text-center\">Sorry you dont have edit permissions!</p>\n        </Container>\n\n        <Footer />\n      </div>\n    );\n  }\n}\n\nexport default withRouter(ArticleEdit);\n"]},"metadata":{},"sourceType":"module"}